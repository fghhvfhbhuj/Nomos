# 📘 Day009 - DecayOption

## 🧠 核心理念

本结构产品基于一种高维结构行为的风险度量方式 —— **高阶导数贡献衰减率**，定义了一个新的标的变量 `DecayIndex`，以此表达组合在结构复杂性维度上出现“非线性风险释放”前的预兆行为。

当市场处于稳定状态时，结构产品的泰勒展开高阶项贡献将快速衰减；而在结构临界点临近时，这种衰减速度将减缓或停止。我们将这一“衰减异常”作为敲入触发机制，构造保险类结构衍生品。

---

## 📐 结构定义（DecayOption）

- **标的物**：组合在价格扰动下高阶导贡献构成的衰减序列
- **核心指标**：DecayIndex = \( \sum_{n=2}^{5} \frac{D_n}{n^2} \)，其中 \( D_n = \left| \frac{\partial^n V}{\partial S^n} \right| \cdot (\Delta S)^n \)
- **触发条件**：DecayIndex ≤ 阈值 θ
- **支付逻辑**：
  - 敲入后若标的结构崩塌（例如组合 VAR 超过警戒线），则赔付；
  - 若未敲入，则不支付；
  - 可选附带 Coupon 或 Margin 结构。

---

## 📊 模拟逻辑 & Python 实现模块建议

### 1. 生成结构扰动路径

- 模拟一个基本期权组合或 barrier 组合；
- 用 `bump` 技术或微扰路径模拟价格扰动 \( \Delta S \)；
- 估算 2~5 阶导数对应的结构贡献 \( D_n \)，组成 `CDS` 序列。

> 建议模块：`generate_CDS_sequence.py`

---

### 2. 构建 DecayIndex 并判断是否敲入

- 对 CDS 序列归一化；
- 设定权重函数，如 \( \lambda_n = \frac{1}{n^2} \)，计算加权和；
- 判断是否跌破门槛 θ，记录敲入路径及位置。

> 建议模块：`compute_decay_index.py`

---

### 3. 构建结构爆炸模拟场景

- 一旦敲入，进入结构爆发模拟阶段；
- 可设定组合 VAR、Delta、Gamma 或 portfolio pnl 等作为爆发指标；
- 若结构指标超标，则定义 payoff（如 \$10000）；

> 建议模块：`simulate_structure_failure.py`

---

### 4. Monte Carlo 定价

- 模拟多组扰动路径 + 多组爆发场景；
- 输出：`触发率 × 条件下期望赔付 × 折现因子`；
- 得出该结构在当前组合下的定价；

> 建议模块：`price_decay_option.py`

---

## 🧪 模拟初始条件建议

| 项目 | 参数 |
|------|------|
| 初始组合 | 1 股 AAPL + 1 张 ATM 看涨期权 |
| 波动率 | 20% 年化 |
| Gamma 来源 | 期权项（Delta-Gamma 模型） |
| 时间步长 | 1天 |
| 模拟路径数 | 1000 条 |
| 敲入门槛 θ | 设定为历史均值下的 2σ 临界线 |
| 敲入后观察周期 | 5天内结构是否爆发 |
| 赔付结构 | 爆发即支付 \$10000 |

---

## 📘 风险说明（Risk Disclosure）

- 本结构依赖于模型风险本身，因此不适用于模型失效下的“瞬时价格修正”；
- 对于极端事件无预测能力，仅作为结构行为信号的放大器；
- 高阶导数估计误差大，建议在高频多路径模拟下才使用；
- 应仅在结构复杂性驱动较强的组合中使用（如 exotic options、嵌套结构组合）。

---

## 🏗️ 可选拓展方向

- 将 DecayIndex 作为结构风险 ETF 的触发器；
- 构造结构组合对冲（如 long 高 Gamma 结构 + long DecayOption）；
- 用神经网络近似结构贡献衰减序列，代替显式导数计算。

---

## ✅ 作者注

本结构产品不是为了创造复杂，而是为了捕捉结构表达力的极限。  
它交易的不是价格本身，而是**风险模型即将崩塌的那一刻“结构语言失效”的预兆**。

