# Structure #11 å®žçŽ°æ–‡æ¡£ï¼šFriction-Driven Structural Derivative

## ðŸŽ¯ é¡¹ç›®ç›®æ ‡

æž„å»ºä¸€ä¸ªç»“æž„è¡ç”Ÿå“æ¨¡åž‹ï¼Œå…¶å®šä»·ä¾èµ–äºŽä»¥ä¸‹å››ä¸ªå˜é‡æž„æˆçš„ç»“æž„æµå½¢ï¼š

- éšå«æ³¢åŠ¨çŽ‡ \( \sigma \)
- åˆ°æœŸæ—¶é—´ \( T \)
- å¸‚åœºæ‘©æ“¦å› å­ \( \lambda \)
- å¸‚åœºäº¤æ˜“ä»·æ ¼ \( C \)

é€šè¿‡åæŽ¨ã€æ‹Ÿåˆä¸Žæ­£åˆ™åŒ–ç­‰æ‰‹æ®µï¼Œåœ¨è¯¥å››ç»´ç»“æž„ç©ºé—´ä¸­å»ºç«‹å¯å¾®æ‹Ÿæµå½¢ï¼Œå¹¶ä»Žä¸­æå–æ›²çŽ‡å¼ åŠ›ç»“æž„ï¼Œæž„é€  payoff å‡½æ•°ä¸Žç»“æž„ä¿é™©å‰¯è…¿ã€‚

---

## ðŸ“Œ ä¸»è¦å‡è®¾æ¡ä»¶ï¼ˆç”¨äºŽä»£ç å¯æ‰§è¡Œæ€§ï¼‰

### æ ‡çš„èµ„äº§
- å•ä¸€å¯äº¤æ˜“æŒ‡æ•°ï¼ˆå¦‚ S&P500ï¼Œæ ‡è®°ä¸º `S0`ï¼‰
- å‡è®¾åˆå§‹ä»·æ ¼ä¸º `S0 = 100`

### æ—¶é—´ç»´åº¦
- äº§å“åˆ°æœŸæ—¶é—´ `T âˆˆ [0.1, 1.0]`ï¼ˆå•ä½ï¼šå¹´ï¼‰
- æ”¯æŒè‹¥å¹²å›ºå®š `T` ç‚¹ï¼šä¾‹å¦‚ `[0.25, 0.5, 0.75, 1.0]`

### æ³¢åŠ¨çŽ‡
- ä½¿ç”¨æ ‡å‡† Black-Scholes éšå«æ³¢åŠ¨çŽ‡ surface æ¨¡æ‹Ÿæ•°æ®
- å¯ä»¥ä»Žå¸‚åœºä»·æ ¼åæŽ¨ï¼Œä¹Ÿå¯ä»¥è‡ªé€ å¹³æ»‘å‡½æ•°ï¼Œå¦‚ï¼š
  \[
  \sigma(K, T) = 0.2 + 0.05 \cdot \sin(5K) \cdot e^{-T}
  \]

### å¸‚åœºæ‘©æ“¦é¡¹ \( \lambda \)
- å®šä¹‰ä¸ºäº¤æ˜“é‡çš„å‡½æ•°ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰ï¼š
  \[
  \lambda(K,T) = \eta \cdot \log(1 + V(K,T)) + \epsilon
  \]
  - å…¶ä¸­ \( V \)ï¼šè™šæ‹Ÿäº¤æ˜“é‡ï¼Œ\( \epsilon \)ï¼šé«˜æ–¯æ‰°åŠ¨
  - å¯ç”¨ `Volume ~ Gamma` æˆ– `Uniform` ç”Ÿæˆ

### å¸‚åœºä»·æ ¼ \( C \)
- ç”± BSM å®šä»·å™¨ + Î» ä¿®æ­£å¾—åˆ°ï¼š
  \[
  C(K, T) = BS(S_0, K, T, \sigma) + \lambda \cdot \Gamma
  \]

---

## âœ… æ‰€éœ€å®žçŽ°å†…å®¹

### 1. æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆæ¨¡å—
- ç”Ÿæˆ strike gridï¼š`K = np.linspace(80, 120, n)`
- ç”Ÿæˆæ—¶é—´ gridï¼š`T = np.array([0.25, 0.5, 0.75, 1.0])`
- ç”Ÿæˆ \( \sigma(K,T) \)
- æ¨¡æ‹Ÿæˆäº¤é‡ â†’ æŽ¨å‡º \( \lambda(K,T) \)
- ç”¨ BSM å…¬å¼ + \( \lambda \cdot \Gamma \) å¾—åˆ° \( C(K,T) \)

### 2. æ‹Ÿåˆç»“æž„æµå½¢æ¨¡å—
- æž„é€  \( f(Ïƒ, T, Î») = C \) çš„ç¦»æ•£ç‚¹é›†
- ä½¿ç”¨å¤šå…ƒæ’å€¼ / spline / ç¥žç»ç½‘ç»œ æ‹Ÿåˆå‡ºå…‰æ»‘å‡½æ•°
- å¯é€‰ï¼šè®¡ç®—è¯¥ç»“æž„ä¸‰ç»´åµŒå…¥æµå½¢çš„æ›²çŽ‡ï¼ˆHessian + Gaussï¼‰

### 3. æ›²çŽ‡è®¡ç®—æ¨¡å—ï¼ˆå…³é”®ï¼‰
- å®žçŽ°ä¸€å¥—å±€éƒ¨æ›²çŽ‡ä¼°è®¡æ–¹æ³•ï¼ˆå¦‚ç¦»æ•£ Hessianï¼‰
- ç”Ÿæˆ \( \mathcal{K}(Ïƒ, T, Î») \) æ›²çŽ‡å¼ é‡å­—æ®µ
- æ ‡è®°é«˜æ›²çŽ‡åŒºåŸŸç”¨äºŽè§¦å‘ payoff

### 4. ç»“æž„æ”¶ç›Šå‡½æ•°æ¨¡å—
- æž„é€ ç»“æž„è§¦å‘æ¡ä»¶ï¼š
  ```python
  triggered = K_curve > threshold and C > C0
